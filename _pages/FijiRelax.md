---
autogenerated: true
title: FijiRelax
layout: page
categories: Plugins,Analysis
description: Quantitative MRI analysis
---


{% capture source%}
{% include github org='Rocsg' repo='FijiRelax' %}
{% endcapture %}
{% include info-box name='FijiRelax' software='Fiji' author='Romain Fernandez' maintainer='Romain Fernandez' source=source released='February 11<sup>th</sup>, 2021' status='stable, active' category='[Analysis](Category_Analysis)' %}

FijiRelax is a generic tool for 3D+t MRI analysis and exploration using multi-echo spin-echo sequences. This tools is developed in the context of the Aplim project (see  [Aplim project official page](https://umr-agap.cirad.fr/recherche/projets-de-recherche/aplim) ). 

 
**Plugin features :**
--

-  Proton density, T1 and T2 maps computation from multi-echo spin-echo sequences (multiple TR and/or TE)
-  Parameters estimation by fitting noise-corrected mono- and biexponential decay models
- Automatic correction of spatial drift and deformations for long T1 or T2 sequences
- Exploration of T1/T2 distribution in ROI over time
- Operable through a GUI, or scriptable for batch processing of large datasets

<figure><img src="/media/FijiRelax_Snap_glob_explorer.png" title="Time-lapse exploration of parameters in a plant under drought stress" width="800" alt="Time-lapse exploration of parameters in a plant under drought stress" /><figcaption aria-hidden="true">Time-lapse exploration of parameters in a plant under drought stress</figcaption></figure>

 
**Dataset for testing purpose :**
--
A comprehensive dataset can be found on Zenodo at [https://doi.org/10.5281/zenodo.4518730](https://doi.org/10.5281/zenodo.4518730) 

**Demo :**
--
The following video shows an example of FijiRelax application: the T1-T2 cross-fit computation for a series of spin echo sequences collected on a sorgho stem. *(Available on youtube soon)*


**Installation**
--

In order to install FijiRelax on your computer, please follow these steps:

1\. *(if needed) *Download and install Fiji from https://fiji.sc/ ; start Fiji, and let it automatically update. Then restart Fiji.

2\. Open Fiji, run the **Update manager** (Help &gt; Update). Click on "OK" to close the first popup windows, then click on the button **Manage update sites...**.

3\. In this list, activate **ImageJ-ITK** by checking the corresponding checkboxes. Don't close the window, or reopen it if you read this too late.

4\. Add the **Fijiyama** repository (by clicking on the button **Add update site**, and filling the fields : name = "Fijiyama", site = https://sites.imagej.net/Fijiyama), then check the associated checkbox. Now you can click on **Close** and apply the modifications.

5\. Restart Fiji: a new **FijiRelax** entry should be available in the menu Plugins &gt; Analyze. If not, go back to the Update Manager, and check that the repositories **ImageJ-ITK** and **Fijiyama** are correctly selected.

 The following video shows a tutorial for Fijiyama installation: *(Available on youtube soon)*


**Preparing your data**
--

FijiRleax needs properly formatted dataset:
- Nifti 4D images, or a set of Nifti 3D images
- Dicom dirs with 3D images, or a set of dirs with 2D images


**The interface**
--
<figure><img src="/media/FijiRelax_Snap_Main_Window.png" title="FijiRelax main window" width="800" alt="FijiRelax main window" /><figcaption aria-hidden="true">FijiRelax main window</figcaption></figure>




**Tutorial 1 : proton density and T2 map computation from brain 4D nifti data**
--

- Download the example set: [https://doi.org/10.5281/zenodo.4518730](https://doi.org/10.5281/zenodo.4518730) 
- Run FijiRelax. Click on "Import Nifti/Dicom data". After metadata parsing, click ok on the summary window
- There is no need to register sequences with this exemple. But you can try it, and check if you see differences
- Click on "Compute maps" to compute PD and T2 maps. After map computation, the new Hypermap contains the computed maps in the first channels
- Click on "Process Outliers" to remove outliers. You can let the default parameters for this example.
- Click on "Explorer" to explore the data. Once opened, click on a point of the brain to display the T2 distribution among the ROI
- Type 'h' to have more informations about the explorer

These operations can be achieved using the following beanshell script:
*(Not yet available)*



**Tutorial 2 : proton density, T1 and T2 time-series from 3D dicom data of a sorgho plant**
--
*(Not yet available)*












The output image is a 4D MR hyperimage. The "channels" slicer helps you to explore the 4th dimension, that is the images computed, and the input spin echo images. In detail :

-   Channels 1,2 3 are respectively the M0 map, T1 map, T2 map (see this information in the slice title, just upside the image pixels)
-   Channels 4,5, ..... NR-3 are the successive NR repetition times of the "T1 sequence", in increasing order.
-   Channels NR-2,..... NR-2+NE are the successive NE echo times of the "T2 sequence", in increasing order.

  
Unit for the channels 2 and 3 are milliseconds, what mean you can use it like it, without any additional conversion.  
For time-lapse experiments, one can compute such a 4D MR hyperimage at successive timepoints, and register and combine them in a 5D MR hyperimage (the same, with an additional slicer to walk through time). Registration and data combining can be done using the plugin \[Fijiyama\], using the Series registration mode .

  
**The science behind**
--
This plugin compute M0, T1 and T2 maps pixelwise from a given set of spin-echo sequences, acquired with different repetition times and/or different echo times.

First a 3d registration is computed to align precisely the successive images, using libraries of the \[Fijiyama\] plugin. Then the rice noise level is estimated, and the M0, T1 and T2 parameters are estimated, fitting mono or bi-exponential curves, corrected with the measured rice noise. For more information, see the paper in next section.

**Citing this work**
--

- Romain Fernandez, Cédric Moisy, Christophe Goze-Bac, Maïda Cardoso, Rahima Sidi-Boulenouar, Jean-Luc Vedeil, 2021  «FijiRelax: Fast and noise-corrected estimation of MRI relaxation maps in 3D + t» *under review*
  

**Software dependencies acknowledgements**
--
-   Johannes Schindelin et al for [Fiji](https://imagej.net/Fiji) (Schindelin et al., 2012)
-   Karl Schmidt and Curtis Rueden for MRI Analysis Calculator and CurveFitters

  

**License**
--
This program is an open-source **free software**: it can be redistributed and/or modified under the terms of the **GNU General Public License** as published by the Free Software Foundation ([http://www.gnu.org/licenses/gpl.txt](http://www.gnu.org/licenses/gpl.txt)).

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

------------------------------------------------------------------------

 
